$include: etc/reference-data.yaml
$include: etc/config.yaml

tasks:
  - name: Print Meson Repos Clean Commands
    tags: [clean-commands]
    parallel-tasks:
      - name: Print Meson Repo % Clean Command
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-tidy-commands-%.log make clean -bn"

  - name: Print Meson Repos Tidy Commands
    tags: [tidy-commands]
    parallel-tasks:
      - name: Print Meson Repo % Tidy Command
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-tidy-commands-%.log make tidy -bn"

  - name: Print Meson Repos Git Status
    tags: [git-status]
    parallel-tasks:
      - name: Print Meson Repo Git Status %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-git-status-%.log git status"

  - name: Print Meson Repos Git Diff
    tags: [git-diff]
    parallel-tasks:
      - name: Print Meson Repo Git diff %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && git diff"

  - name: Print Meson Repos Build Commands
    tags: [build-commands]
    parallel-tasks:
      - name: Print Meson Repo % Build Command
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-build-commands-%.log make build -bn"

  - name: Print Meson Repos Test Commands
    tags: [test-commands]
    parallel-tasks:
      - name: Print Meson Repo Test Command %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-test-commands-%.log make test -bn"

