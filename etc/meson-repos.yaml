$include: etc/reference-data.yaml
$include: etc/config.yaml


tasks:
  - name: Clean Meson Repos
    tags: [clean]
    parallel-tasks:
      - name: Clean Meson Repo %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && make clean"

  - name: Tidy Meson Repos
    tags: [tidy]
    parallel-tasks:
      - name: Tidy Meson Repo %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && make tidy"

  - name: Build Meson Repos
    tags: [build]
    parallel-tasks:
      - name: Print Meson Repo Build Command %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && make build"

  - name: Test Meson Repos
    tags: [test]
    parallel-tasks:
      - name: Test Meson Repo %
        for-each: *meson-dirs
        ignore-failure: false
        cmd: env bash -c "cd ~/repos/%/. && passh -L /tmp/meson-repos-test-%.log make test"
